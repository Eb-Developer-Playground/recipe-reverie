<main>
  <div class="container form-container">
    <div class="details-form">
      <h1>Finish setting up your profile</h1>

      <form [formGroup]="detailsForm" (submit)="submit()">
        <div class="inputs">
          <div class="number">
            <mat-form-field>
              <mat-label>Country</mat-label>

              <mat-select [formControl]="countryCodeControl">
                <mat-option>Country</mat-option>
                @for (country of countries; track country) {
                <mat-option [value]="country.code">
                  {{ country.name }}
                </mat-option>
                }
              </mat-select>
              <mat-hint>Pick your country</mat-hint>
            </mat-form-field>
            <mat-form-field>
              <mat-label>Phone Number</mat-label>

              <input
                type="text"
                matInput
                placeholder="0720 000 000"
                formControlName="phoneNumber"
              />
              <mat-hint>Enter your phone number here</mat-hint>

              @if (phoneNumberControl.invalid) {
              <mat-error>{{ getPhoneNumberErrors() }}</mat-error>
              }
            </mat-form-field>
          </div>
          <mat-form-field>
            <mat-label>About Me</mat-label>

            <textarea
              matInput
              placeholder="A little bit about myself"
              formControlName="aboutMe"
            ></textarea>
            <mat-hint align="start">
              Tell us something about who you are
            </mat-hint>
            <mat-hint align="end">
              {{ aboutMeControl.value.length }} / 300
            </mat-hint>

            @if(aboutMeControl.invalid) {
            <mat-error>{{ getAboutMeErrors() }}</mat-error>
            }
          </mat-form-field>
          <mat-divider> </mat-divider>
          <h1>Customization</h1>
          <mat-form-field>
            <mat-label>Profile Picture</mat-label>
            <input
              matInput
              type="url"
              placeholder="https://imageurl.place"
              formControlName="profilePicture"
            />
            <mat-hint>
              Enter the link to the image you want to use as your profile
              picture (Optional)
            </mat-hint>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Cover Photo</mat-label>
            <input
              matInput
              type="url"
              placeholder="https://imageurl.place"
              formControlName="profilePicture"
            />
            <mat-hint>
              Enter the link to the image you want to use as your cover photo
              (Optional)
            </mat-hint>
          </mat-form-field>
          @if(formValid) {
          <button
            mat-raised-button
            color="primary"
            type="submit"
            disabledInteractive
          >
            Submit
          </button>

          } @else {
          <button
            mat-raised-button
            color="primary"
            type="submit"
            disabled
            disabledInteractive
            matTooltip="Check your inputs and try again"
          >
            Submit
          </button>
          }
        </div>
      </form>
    </div>
  </div>
</main>
